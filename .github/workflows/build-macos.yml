name: build-macos

on:
  workflow_dispatch:
  push:
    branches:
    - master
    paths-ignore:
    - '**/*.md'
  pull_request:
    paths-ignore:
    - '**/*.md'
  
jobs:
  get-of:
    runs-on: macos-10.15
    steps:
    - name: getOF
      uses: robinraju/release-downloader@v1.4
      with:
        repository: "openframeworks/openFrameworks"
        latest: true
        fileName: "*_osx_release.zip"
        out-file-path: "downloads"
  build-osx:
    needs: get-of
    runs-on: macos-10.15
#     strategy:
#         matrix:
#           cfg:
#           - {target: osx, opt: ""}
#           - {target: osx, opt: "makefiles"}
#     env:
#       TARGET: ${{matrix.cfg.target}}
#       OPT: ${{matrix.cfg.opt}}
    steps:
    - uses: actions/checkout@v2
    - name: installOF
      run: 
#           mkdir ~/openFrameworks
          cd downloads
          res=$(find . -name "*_osx_release.zip" | head -1)
          unzip $res -d ~/openFrameworks

#    - name: Build
#      env:
#        DEVELOPER_DIR: "/Applications/Xcode_12.2.app/Contents/Developer"
#        SDKROOT: "/Applications/Xcode_12.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk"
